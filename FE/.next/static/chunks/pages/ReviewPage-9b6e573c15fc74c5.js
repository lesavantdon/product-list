(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{8100:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ReviewPage",function(){return n(8866)}])},8866:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return pages_ReviewPage}});var t,s,a,u=n(5893),i=n(7294),c=n(1010),o=n(5766),h=n(2253),l=n(4932),d=n(1309),p=n(7582),v=n(7066);(0,c._)(function(e){var r;return(0,p.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,v.Z.get("/api/products/".concat(e))];case 1:return[2,n.sent().data];case 2:throw console.error("Error fetching product:",r=n.sent()),r;case 3:return[2]}})});var w=(t=(0,c._)(function(e,r){var n,t;return(0,p.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,v.Z.post("/api/products/".concat(e,"/reviews"),r)];case 1:return console.log("Review added:",(n=s.sent()).data),[2,n.data];case 2:throw console.error("Error adding review:",t=s.sent()),t;case 3:return[2]}})}),function(e,r){return t.apply(this,arguments)}),f=(s=(0,c._)(function(e,r){var n,t;return(0,p.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,v.Z.get("/api/products/".concat(e,"/reviews"),{params:{page:r}})];case 1:return console.log("Reviews:",(n=s.sent()).data),[2,n.data];case 2:throw console.error("Error fetching reviews:",t=s.sent()),t;case 3:return[2]}})}),function(e,r){return s.apply(this,arguments)}),g=(a=(0,c._)(function(e){var r,n;return(0,p.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,v.Z.delete("/api/reviews/".concat(e))];case 1:return console.log("Review deleted:",(r=t.sent()).data),[2,r.data];case 2:throw console.error("Error deleting review:",n=t.sent()),n;case 3:return[2]}})}),function(e){return a.apply(this,arguments)}),reviewComponent=function(e){var r,n,t=e.productId,s=(0,d._)((0,i.useState)([]),2),a=s[0],v=s[1],_=(0,d._)((0,i.useState)({user:"",rating:"",review:""}),2),x=_[0],j=_[1];(0,i.useEffect)(function(){var e;(e=(0,c._)(function(){return(0,p.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,f(t,1)];case 1:return v(e.sent()),[3,3];case 2:return console.error("Error fetching reviews:",e.sent()),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)})()},[t]);var handleInputChange=function(e){var r=e.target,n=r.name,t=r.value;j((0,l._)((0,h._)({},x),(0,o._)({},n,t)))},y=(r=(0,c._)(function(){return(0,p.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,w(t,x)];case 1:return e.sent(),j({user:"",rating:"",review:""}),[4,f(t,1)];case 2:return v(e.sent()),[3,4];case 3:return console.error("Error adding review:",e.sent()),[3,4];case 4:return[2]}})}),function(){return r.apply(this,arguments)}),m=(n=(0,c._)(function(e){return(0,p.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,g(e)];case 1:return r.sent(),[4,f(t,1)];case 2:return v(r.sent()),[3,4];case 3:return console.error("Error deleting review:",r.sent()),[3,4];case 4:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Reviews"}),(0,u.jsx)("ul",{children:a.map(function(e){return(0,u.jsxs)("li",{children:[(0,u.jsx)("strong",{children:e.user})," - ",e.rating,"/5",(0,u.jsx)("p",{children:e.review}),(0,u.jsx)("button",{onClick:function(){return m(e.id)},children:"Delete"})]},e.id)})}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h4",{children:"Add a Review"}),(0,u.jsx)("input",{type:"text",name:"user",value:x.user,onChange:handleInputChange,placeholder:"Your name"}),(0,u.jsx)("input",{type:"number",name:"rating",value:x.rating,onChange:handleInputChange,placeholder:"Rating (1-5)",min:"1",max:"5"}),(0,u.jsx)("textarea",{name:"review",value:x.review,onChange:handleInputChange,placeholder:"Your review"}),(0,u.jsx)("button",{onClick:y,children:"Submit"})]})]})},pages_ReviewPage=function(e){var r=e.productId;return(0,u.jsxs)("div",{className:"review-page",children:[(0,u.jsx)("h1",{children:"Product Reviews"}),(0,u.jsx)(reviewComponent,{productId:r})]})}}},function(e){e.O(0,[774,66,888,377],function(){return e(e.s=8100)}),_N_E=e.O()}]);