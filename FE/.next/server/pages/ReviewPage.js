"use strict";(()=>{var e={};e.id=560,e.ids=[560,888,660],e.modules={4218:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>_,default:()=>v,getServerSideProps:()=>g,getStaticPaths:()=>p,getStaticProps:()=>w,reportWebVitals:()=>x,routeModule:()=>b,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>m,unstable_getStaticPaths:()=>R,unstable_getStaticProps:()=>P});var i=r(7093),n=r(5244),s=r(1323),l=r(9209),c=r.n(l),d=r(1337),o=r.n(d),u=r(3908),h=e([u]);u=(h.then?(await h)():h)[0];let v=(0,s.l)(u,"default"),w=(0,s.l)(u,"getStaticProps"),p=(0,s.l)(u,"getStaticPaths"),g=(0,s.l)(u,"getServerSideProps"),_=(0,s.l)(u,"config"),x=(0,s.l)(u,"reportWebVitals"),P=(0,s.l)(u,"unstable_getStaticProps"),R=(0,s.l)(u,"unstable_getStaticPaths"),m=(0,s.l)(u,"unstable_getStaticParams"),S=(0,s.l)(u,"unstable_getServerProps"),y=(0,s.l)(u,"unstable_getServerSideProps"),b=new i.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/ReviewPage",pathname:"/ReviewPage",bundlePath:"",filename:""},components:{App:o(),Document:c()},userland:u});a()}catch(e){a(e)}})},5560:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var i=r(997),n=r(6689),s=r(4237),l=e([s]);s=(l.then?(await l)():l)[0];let __WEBPACK_DEFAULT_EXPORT__=({productId:e})=>{let[t,r]=(0,n.useState)([]),[a,l]=(0,n.useState)({user:"",rating:"",review:""});(0,n.useEffect)(()=>{let getReviews=async()=>{try{let t=await (0,s.Bt)(e,1);r(t)}catch(e){console.error("Error fetching reviews:",e)}};getReviews()},[e]);let handleInputChange=e=>{let{name:t,value:r}=e.target;l({...a,[t]:r})},handleAddReview=async()=>{try{await (0,s.N_)(e,a),l({user:"",rating:"",review:""});let t=await (0,s.Bt)(e,1);r(t)}catch(e){console.error("Error adding review:",e)}},handleDeleteReview=async t=>{try{await (0,s.i0)(t);let a=await (0,s.Bt)(e,1);r(a)}catch(e){console.error("Error deleting review:",e)}};return(0,i.jsxs)("div",{children:[i.jsx("h3",{children:"Reviews"}),i.jsx("ul",{children:t.map(e=>(0,i.jsxs)("li",{children:[i.jsx("strong",{children:e.user})," - ",e.rating,"/5",i.jsx("p",{children:e.review}),i.jsx("button",{onClick:()=>handleDeleteReview(e.id),children:"Delete"})]},e.id))}),(0,i.jsxs)("div",{children:[i.jsx("h4",{children:"Add a Review"}),i.jsx("input",{type:"text",name:"user",value:a.user,onChange:handleInputChange,placeholder:"Your name"}),i.jsx("input",{type:"number",name:"rating",value:a.rating,onChange:handleInputChange,placeholder:"Rating (1-5)",min:"1",max:"5"}),i.jsx("textarea",{name:"review",value:a.review,onChange:handleInputChange,placeholder:"Your review"}),i.jsx("button",{onClick:handleAddReview,children:"Submit"})]})]})};a()}catch(e){a(e)}})},3908:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var i=r(997);r(6689);var n=r(5560),s=e([n]);n=(s.then?(await s)():s)[0];let __WEBPACK_DEFAULT_EXPORT__=function({productId:e}){return(0,i.jsxs)("div",{className:"review-page",children:[i.jsx("h1",{children:"Product Reviews"}),i.jsx(n.Z,{productId:e})]})};a()}catch(e){a(e)}})},4237:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Bt:()=>fetchReviews,N_:()=>addReview,i0:()=>deleteReview});var i=r(9648),n=e([i]);i=(n.then?(await n)():n)[0];let addReview=async(e,t)=>{try{let r=await i.default.post(`/api/products/${e}/reviews`,t);return console.log("Review added:",r.data),r.data}catch(e){throw console.error("Error adding review:",e),e}},fetchReviews=async(e,t)=>{try{let r=await i.default.get(`/api/products/${e}/reviews`,{params:{page:t}});return console.log("Reviews:",r.data),r.data}catch(e){throw console.error("Error fetching reviews:",e),e}},deleteReview=async e=>{try{let t=await i.default.delete(`/api/reviews/${e}`);return console.log("Review deleted:",t.data),t.data}catch(e){throw console.error("Error deleting review:",e),e}};a()}catch(e){a(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},9648:e=>{e.exports=import("axios")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[514,209,337,450],()=>__webpack_exec__(4218));module.exports=r})();